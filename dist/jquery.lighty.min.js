/*! jq Lighty - v0.0.1 - 2012-05-18
* Copyright (c) 2012 Andreas Hultgren; Licensed MIT */
(function(a){var b={baseZ:5,bgColor:"rgba(0,0,0,0.85)",data:function(){return{jsonposts:1}},prefix:"lighty-",itemTemplate:function(a){var b='<img src="'+a[0].the_post_thumbnail[0]+'" />'+'<p class="desc">'+a[0].the_excerpt+"</p>";return{markup:b,width:a[0].the_post_thumbnail[1],height:a[0].the_post_thumbnail[2]}}},c,d,e=function(){var e=a(this);return c.show(),d.append('<div class="'+b.prefix+'waiter"></div>').css({top:e.offset().top-a(window).scrollTop,left:e.offset().left,width:e.width(),height:e.height()}).show(),a.ajax({url:e.attr("href"),data:b.data.call(e),dataType:"json",error:function(a,b){},success:function(a){var c=b.itemTemplate.call(this,a);d.lighty("resize",{width:c.width,height:c.height},function(){d.empty().append(c.markup)})}}),this},f=function(){c.hide(),d.hide().empty()},g={init:function(g){return a.extend(b,g),c=a(document.createElement("div")).attr("id",b.prefix+"bg").css({background:b.bgColor,position:"fixed",top:0,left:0,right:0,bottom:0,"z-index":b.baseZ}).hide().appendTo("body"),d=a(document.createElement("div")).attr("id",b.prefix+"container").css({position:"fixed",left:a(window).width()/2,top:a(window).height()/2,"z-index":b.baseZ+1}).hide().appendTo("body"),c.click(function(){f()}),this.each(function(){a(this).click(function(a){a.preventDefault(),e.call(this)})})},resize:function(b,c){return this.each(function(){var d=a(window),e=d.width(),f=d.height(),g;b=b||{},b.height=b.height||a(this).height(),b.width=b.width||a(this).width(),b.width>e-50&&(g=(e-50)/b.width,b.width*=g,b.height*=g),b.height>f-100&&(g=(f-100)/b.height,b.width*=g,b.height*=g),a(this).animate({width:b.width,height:b.height,left:e/2-b.width/2,top:f/2-b.height/2},{duration:200,complete:function(){typeof c=="function"&&c()}})})}};a.fn.lighty=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return g.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.lighty")}})(jQuery);